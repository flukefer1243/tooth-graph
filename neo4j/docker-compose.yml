services:
  # === Instance 1 ===
  # Tooth knowledge graph
  neo4j_1:
    image: neo4j:latest
    container_name: neo4j_db_1
    restart: unless-stopped
    ports:
      - "7474:7474"
      - "7687:7687"
    environment:
      - NEO4J_AUTH=neo4j/12345678
      - NEO4J_PLUGINS=["apoc"] 
      - NEO4J_server_memory_heap_initial__size=512m
      - NEO4J_server_memory_heap_max__size=2G
    volumes:
      - ./neo4j_1/data:/data         # All data lives inside neo4j_1/data
      - ./neo4j_1/logs:/logs
      - ./neo4j_1/import:/import
      - ./neo4j_1/plugins:/plugins

  # === Instance 2 ===
  # Typhoon parsing
  neo4j_2:
    image: neo4j:latest
    container_name: neo4j_db_2
    restart: unless-stopped
    ports:
      - "7475:7474"
      - "7688:7687"
    environment:
      - NEO4J_AUTH=neo4j/12345678
      - NEO4J_PLUGINS=["apoc"] 
      - NEO4J_server_memory_heap_initial__size=512m
      - NEO4J_server_memory_heap_max__size=2G
    volumes:
      - ./neo4j_2/data:/data         # All data lives inside neo4j_2/data
      - ./neo4j_2/logs:/logs
      - ./neo4j_2/import:/import
      - ./neo4j_2/plugins:/plugins

  # === Instance 3 === 
  # Dependencies parsing
  neo4j_3:
    image: neo4j:latest
    container_name: neo4j_db_3
    restart: unless-stopped
    ports:
      - "7476:7474"
      - "7689:7687"
    environment:
      - NEO4J_AUTH=neo4j/12345678
      - NEO4J_PLUGINS=["apoc"] 
      - NEO4J_server_memory_heap_initial__size=512m
      - NEO4J_server_memory_heap_max__size=2G
    volumes:
      - ./neo4j_3/data:/data         # All data lives inside neo4j_3/data
      - ./neo4j_3/logs:/logs
      - ./neo4j_3/import:/import
      - ./neo4j_3/plugins:/plugins